import{u as L,a as A,j as e,c as g}from"./index-7K8_TIZa.js";import{r as o,f as T,p as P,X as G,L as y,d as j,q as U,G as z,E as M}from"./ui-BUdSGY4c.js";import"./react-BzrpNAyj.js";import"./state-DOmTuY2F.js";const O=["What is the latest news today?","Search for React 19 features","Compare iPhone 15 vs Samsung S24","How to learn TypeScript?","What's the weather like?"];function K(){const{isOpen:r,isLoading:a,isSearching:m,messages:n,currentInput:i,close:l,setInput:h,sendMessage:N,clearMessages:w}=L(),{navigate:k,activeTabId:p}=A(),c=o.useRef(null),f=o.useRef(null);o.useEffect(()=>{r&&c.current&&c.current.focus()},[r]),o.useEffect(()=>{f.current?.scrollIntoView({behavior:"smooth"})},[n]),o.useEffect(()=>{const t=s=>{s.key==="Escape"&&r&&l()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[r,l]);const S=async t=>{t.preventDefault(),!(!i.trim()||a)&&await N(i.trim())},C=t=>{h(t),c.current?.focus()},b=t=>{p&&(k(p,t),l())},E=t=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(j,{className:"h-3 w-3"}),e.jsx("span",{children:"Sources"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.slice(0,5).map((s,d)=>e.jsxs("button",{onClick:()=>b(s.url),className:"group flex items-center gap-2 rounded-lg border border-border bg-secondary/50 px-3 py-2 text-left transition-all hover:border-vyber-purple/50 hover:bg-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-md bg-gradient-to-br from-vyber-purple/20 to-vyber-pink/20",children:e.jsx(z,{className:"h-3 w-3 text-vyber-purple"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-xs font-medium",children:s.title}),e.jsx("p",{className:"truncate text-[10px] text-muted-foreground",children:new URL(s.url).hostname})]}),e.jsx(M,{className:"h-3 w-3 shrink-0 opacity-0 transition-opacity group-hover:opacity-100"})]},d))})]}),R=t=>{const s=/\[(\d+)\]/g,d=/(https?:\/\/[^\s]+)/g;return t.split(d).map((x,v)=>x.match(d)?e.jsx("button",{onClick:()=>b(x),className:"text-vyber-cyan underline hover:text-vyber-purple",children:x},v):x.split(s).map((u,I)=>/^\d+$/.test(u)?e.jsx("span",{className:"mx-0.5 inline-flex h-4 w-4 items-center justify-center rounded-full bg-vyber-purple/20 text-[10px] font-medium text-vyber-purple",children:u},`${v}-${I}`):u))};return r?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-12 sm:pt-20",role:"dialog","aria-modal":"true","aria-labelledby":"vyber-ai-title",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:l}),e.jsxs("div",{className:"relative z-10 mx-4 w-full max-w-2xl rounded-2xl border border-border bg-background shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-vyber-purple to-vyber-pink",children:e.jsx(T,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{id:"vyber-ai-title",className:"text-sm font-semibold",children:"Vyber AI"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Search the web & get instant answers"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.length>0&&e.jsx("button",{onClick:w,className:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-secondary hover:text-foreground",title:"Clear conversation","aria-label":"Clear conversation",children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx("button",{onClick:l,className:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-secondary hover:text-foreground","aria-label":"Close command palette",children:e.jsx(G,{className:"h-4 w-4"})})]})]}),n.length>0&&e.jsx("div",{className:"max-h-[60vh] overflow-y-auto p-4",children:e.jsxs("div",{className:"space-y-4",children:[n.map(t=>e.jsx("div",{className:g("flex",t.role==="user"?"justify-end":"justify-start"),children:t.role==="search"&&t.searchResults?e.jsx("div",{className:"w-full",children:E(t.searchResults)}):e.jsx("div",{className:g("max-w-[85%] select-text rounded-2xl px-4 py-2 text-sm",t.role==="user"?"bg-vyber-purple text-white":"bg-secondary text-foreground"),children:t.role==="assistant"?R(t.content):t.content})},t.id)),(a||m)&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl bg-secondary px-4 py-2 text-sm text-muted-foreground",children:[e.jsx(y,{className:"h-4 w-4 animate-spin"}),m?"Searching the web...":"Thinking..."]})}),e.jsx("div",{ref:f})]})}),n.length===0&&e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"mb-3 text-xs text-muted-foreground",children:"Ask anything - I'll search the web for you:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(t=>e.jsx("button",{onClick:()=>C(t),className:"rounded-full border border-border bg-secondary/30 px-3 py-1.5 text-xs text-muted-foreground transition-colors hover:border-vyber-purple/50 hover:text-foreground",children:t},t))})]}),e.jsx("form",{onSubmit:S,className:"border-t border-border p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsx("input",{ref:c,type:"text",value:i,onChange:t=>h(t.target.value),placeholder:"Ask anything...","aria-label":"Ask Vyber AI",autoCapitalize:"off",autoCorrect:"off",autoComplete:"off",spellCheck:!1,className:"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground",disabled:a}),e.jsx("button",{type:"submit",disabled:!i.trim()||a,className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-r from-vyber-purple to-vyber-pink text-white transition-opacity disabled:opacity-50",children:a?e.jsx(y,{className:"h-4 w-4 animate-spin"}):e.jsx(U,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"border-t border-border px-4 py-2 text-center text-xs text-muted-foreground/50",children:["Press ",e.jsx("kbd",{className:"rounded bg-secondary px-1",children:"Esc"})," to close â€¢ Web search + Claude AI"]})]})]}):null}export{K as CommandPalette};
//# sourceMappingURL=CommandPalette-Sj8d7bQ8.js.map
