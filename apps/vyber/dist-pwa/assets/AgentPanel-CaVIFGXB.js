import{b as v,j as e}from"./index-7K8_TIZa.js";import{r as n,B as b,p as y,X as k,f as C,L as S,o as u,n as m,v as T,w as R,x as f,d as E,a as _,y as I,F as $,M as A,G as F}from"./ui-BUdSGY4c.js";import"./react-BzrpNAyj.js";import"./state-DOmTuY2F.js";function z({isOpen:s,onClose:o}){const[l,c]=n.useState(""),d=n.useRef(null),i=n.useRef(null),{isRunning:r,steps:x,result:a,runTask:p,stop:g,clear:j}=v();n.useEffect(()=>{i.current?.scrollIntoView({behavior:"smooth"})},[x]),n.useEffect(()=>{s&&d.current?.focus()},[s]);const h=()=>{!l.trim()||r||(p(l.trim()),c(""))},N=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),h())};return s?e.jsxs("div",{className:"fixed right-0 top-0 z-50 flex h-full w-[420px] flex-col border-l border-border bg-background shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-vyber-purple to-vyber-pink",children:e.jsx(b,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold",children:"VybeR Agent"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r?"Working...":"Ready"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[x.length>0&&e.jsx("button",{onClick:j,className:"rounded-lg p-2 text-muted-foreground hover:bg-secondary hover:text-foreground",title:"Clear history",children:e.jsx(y,{className:"h-4 w-4"})}),e.jsx("button",{onClick:o,className:"rounded-lg p-2 text-muted-foreground hover:bg-secondary hover:text-foreground",children:e.jsx(k,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[x.length===0&&!r?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-vyber-purple/20 to-vyber-pink/20",children:e.jsx(C,{className:"h-8 w-8 text-vyber-purple"})}),e.jsx("h3",{className:"mb-2 font-medium",children:"What can I help you with?"}),e.jsx("p",{className:"mb-6 max-w-xs text-sm text-muted-foreground",children:"I can browse the web, search for information, fill forms, and complete tasks for you."}),e.jsx("div",{className:"space-y-2",children:["Search for flights to Tokyo next week","Find the latest news about AI","Look up the weather in San Francisco"].map(t=>e.jsx("button",{onClick:()=>c(t),className:"block w-full rounded-lg border border-border bg-secondary/30 px-3 py-2 text-left text-sm transition-colors hover:border-vyber-purple/50 hover:bg-secondary",children:t},t))})]}):e.jsxs("div",{className:"space-y-3",children:[x.map((t,w)=>e.jsx(L,{step:t},w)),r&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(S,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Thinking..."})]}),e.jsx("div",{ref:i})]}),a&&!r&&e.jsxs("div",{className:`mt-4 rounded-lg border p-4 ${a.success?"border-green-500/30 bg-green-500/10":"border-red-500/30 bg-red-500/10"}`,children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[a.success?e.jsx(u,{className:"h-5 w-5 text-green-500"}):e.jsx(m,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"font-medium",children:a.success?"Task Complete":"Task Failed"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.summary||a.error}),a.data!==void 0&&a.data!==null&&e.jsx("pre",{className:"mt-2 max-h-32 overflow-auto rounded bg-secondary/50 p-2 text-xs",children:JSON.stringify(a.data,null,2)})]})]}),e.jsxs("div",{className:"border-t border-border p-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:d,value:l,onChange:t=>c(t.target.value),onKeyDown:N,placeholder:"Tell me what to do...",rows:2,disabled:r,className:"w-full resize-none rounded-lg border border-border bg-secondary/30 px-4 py-3 pr-12 text-sm placeholder:text-muted-foreground focus:border-vyber-purple focus:outline-none focus:ring-2 focus:ring-vyber-purple/20 disabled:opacity-50"}),e.jsx("button",{onClick:r?g:h,disabled:!l.trim()&&!r,className:`absolute bottom-3 right-3 rounded-lg p-2 transition-colors ${r?"bg-red-500 text-white hover:bg-red-600":"bg-gradient-to-r from-vyber-purple to-vyber-pink text-white hover:opacity-90 disabled:opacity-50"}`,children:r?e.jsx(T,{className:"h-4 w-4"}):e.jsx(R,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"mt-2 text-center text-xs text-muted-foreground",children:"Press Enter to run â€¢ Shift+Enter for new line"})]})]}):null}function L({step:s}){const[o,l]=n.useState(!1),c=()=>{switch(s.type){case"thinking":return e.jsx(b,{className:"h-4 w-4 text-vyber-purple"});case"tool_call":return d(s.tool);case"tool_result":return s.result?.success?e.jsx(u,{className:"h-4 w-4 text-green-500"}):e.jsx(m,{className:"h-4 w-4 text-red-500"});case"complete":return e.jsx(u,{className:"h-4 w-4 text-green-500"});case"error":return e.jsx(m,{className:"h-4 w-4 text-red-500"});default:return e.jsx(f,{className:"h-4 w-4"})}},d=r=>{switch(r){case"navigate":case"search_google":return e.jsx(F,{className:"h-4 w-4 text-blue-500"});case"click":return e.jsx(A,{className:"h-4 w-4 text-orange-500"});case"extract_text":return e.jsx($,{className:"h-4 w-4 text-green-500"});case"extract_links":return e.jsx(I,{className:"h-4 w-4 text-cyan-500"});case"fill_form":return e.jsx(_,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(E,{className:"h-4 w-4 text-yellow-500"})}},i=()=>{switch(s.type){case"thinking":return"Thinking";case"tool_call":return`Using ${s.tool}`;case"tool_result":return`${s.tool} ${s.result?.success?"succeeded":"failed"}`;case"complete":return"Complete";case"error":return"Error";default:return"Step"}};return e.jsxs("div",{className:"rounded-lg border border-border bg-secondary/20 overflow-hidden",children:[e.jsxs("button",{onClick:()=>l(!o),className:"flex w-full items-center gap-3 p-3 text-left hover:bg-secondary/30",children:[e.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-secondary",children:c()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:i()}),e.jsxs("p",{className:"truncate text-xs text-muted-foreground",children:[s.content.slice(0,60),s.content.length>60?"...":""]})]}),e.jsx(f,{className:`h-4 w-4 text-muted-foreground transition-transform ${o?"rotate-90":""}`})]}),o&&e.jsxs("div",{className:"border-t border-border bg-secondary/10 p-3",children:[e.jsx("p",{className:"mb-2 text-sm whitespace-pre-wrap",children:s.content}),s.input!==void 0&&s.input!==null&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Input:"}),e.jsx("pre",{className:"mt-1 rounded bg-secondary/50 p-2 text-xs overflow-auto max-h-24",children:JSON.stringify(s.input,null,2)})]}),s.result&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Result:"}),e.jsx("pre",{className:"mt-1 rounded bg-secondary/50 p-2 text-xs overflow-auto max-h-24",children:JSON.stringify(s.result,null,2)})]})]})]})}export{z as AgentPanel,z as default};
//# sourceMappingURL=AgentPanel-CaVIFGXB.js.map
