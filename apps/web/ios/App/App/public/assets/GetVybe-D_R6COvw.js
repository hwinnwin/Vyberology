import{j as e}from"./ui-vendor-BdNHRkPp.js";import{r as l,u as le}from"./react-vendor-BrWXyIWg.js";import{c as se,u as te,C as y,v as Y,B as h,l as oe,A as ce,H as de,m as Q,a as U}from"./index-BU0JQuHZ.js";import{I as me}from"./input-BUOmuTmR.js";import{M as B,P as X,C as ue,T as he,S as ge,c as fe,d as xe,r as pe,e as be,b as ve,p as je}from"./PermissionPrompt-B51M4dI8.js";import{s as E}from"./alert-DNlM_nKM.js";import{T as ye,a as we,b as _,c as O}from"./tabs-Bylawymf.js";import{S as R,I as G}from"./sparkles-CGywxmzJ.js";import{s as F}from"./readingHistory-CkV6lPJ-.js";import{C as Z,H as ee}from"./hash-BlhyCpOE.js";import"./supabase-vendor-k7UXo7He.js";import"./query-vendor-aFyS-rxT.js";import"./triangle-alert-nf4miJNe.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=se("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ce=({onCommand:k,isActive:D=!1,disabled:M=!1})=>{const[n,C]=l.useState(!1),[z,S]=l.useState(!1),[u,d]=l.useState(""),[P,f]=l.useState(!1),[H,p]=l.useState(!1),[W,w]=l.useState(!1),m=l.useRef(null),{toast:x}=te();l.useEffect(()=>{(async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(c=>c.stop()),p(!0)}catch{p(!1)}})()},[]),l.useEffect(()=>{const g=window.SpeechRecognition||window.webkitSpeechRecognition;if(!g)return;const r=new g;return r.continuous=!0,r.interimResults=!0,r.lang="en-US",r.onstart=()=>{C(!0)},r.onresult=c=>{let A="",b="";for(let v=c.resultIndex;v<c.results.length;v++){const N=c.results[v][0].transcript;c.results[v].isFinal?b+=N+" ":A+=N}const i=(b+A).toLowerCase();if(d(i),i.includes("hey lumen")||i.includes("hi lumen")){f(!0),S(!0),x({title:"ðŸ‘‹ Hey there!",description:"Lumen is listening... What's the vybe?"});const v=i.indexOf("lumen")+5,N=i.substring(v).trim();N?setTimeout(()=>{k(N),f(!1),S(!1),d("")},500):setTimeout(()=>{S(!1)},3e3)}},r.onerror=c=>{c.error==="not-allowed"&&x({title:"Microphone access denied",description:"Please allow microphone access to use voice commands",variant:"destructive"}),C(!1)},r.onend=()=>{if(C(!1),D&&!M)try{r.start()}catch{}},m.current=r,()=>{m.current&&m.current.stop()}},[D,M,k,x]);const I=async()=>{try{return!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia?(x({title:"Not supported",description:"Your browser doesn't support microphone access. Try Chrome or Safari.",variant:"destructive"}),!1):((await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})).getTracks().forEach(r=>{r.stop()}),p(!0),w(!1),x({title:"Permission granted! ðŸŽ¤",description:"You can now use voice commands"}),setTimeout(()=>{L()},500),!0)}catch(g){const r=g;p(!1);let c="Click the icon in your address bar to enable microphone access";return(r==null?void 0:r.name)==="NotAllowedError"||(r==null?void 0:r.name)==="PermissionDeniedError"?c="Permission denied. Click the ðŸ”’ icon in your address bar and allow microphone.":(r==null?void 0:r.name)==="NotFoundError"?c="No microphone found. Please connect a microphone and try again.":(r==null?void 0:r.name)==="NotSupportedError"&&(c="Microphone not supported in this browser. Try Chrome or Safari."),x({title:"Microphone access denied",description:c,variant:"destructive"}),w(!1),!1}},L=()=>{if(m.current&&!n)try{m.current.start(),x({title:"Listening...",description:'Say "Hey Lumen" to activate'})}catch{x({title:"Voice recognition error",description:"Please try again",variant:"destructive"})}},T=async()=>{if(!H){w(!0);return}L()},V=()=>{m.current&&n&&(m.current.stop(),d(""),f(!1))},q=()=>{n?V():T()};return e.jsxs(y,{className:`border-lf-violet/30 bg-lf-ink/60 p-6 backdrop-blur transition-all ${P?"border-lf-aurora shadow-glow":""}`,children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsxs("div",{className:`relative grid place-items-center rounded-full bg-gradient-to-br from-lf-violet to-lf-aurora p-4 ${n?"animate-pulse":""}`,style:{animationDuration:P?"0.5s":"2s"},children:[n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"absolute inset-0 rounded-full bg-lf-violet/20 animate-ping",style:{animationDuration:"1.5s"}}),e.jsx("span",{className:"absolute inset-0 rounded-full bg-lf-aurora/20 animate-ping",style:{animationDuration:"2s",animationDelay:"0.5s"}})]}),e.jsx("img",{src:Y,alt:"Lumen",className:"h-16 w-16 relative z-10"})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-display text-xl font-semibold text-white mb-2",children:P?"I'm listening!":n?"Say 'Hey Lumen'":"Voice Assistant"}),n&&u&&e.jsxs("p",{className:"text-sm text-lf-slate italic",children:['"',u,'"']}),!n&&e.jsx("p",{className:"text-sm text-lf-slate",children:'Activate voice commands with "Hey Lumen"'})]}),e.jsx(h,{onClick:q,disabled:M,className:`gap-2 ${n?"bg-red-500 hover:bg-red-600":"bg-lf-gradient hover:shadow-glow"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-5 w-5"}),"Stop Listening"]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-5 w-5"}),"Start Listening"]})}),e.jsxs("div",{className:"w-full mt-4 p-4 rounded-lg bg-lf-midnight/50 border border-lf-violet/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(R,{className:"h-4 w-4 text-lf-aurora"}),e.jsx("h4",{className:"text-sm font-semibold text-white",children:"Voice Commands"})]}),e.jsxs("ul",{className:"text-xs text-lf-slate space-y-1",children:[e.jsx("li",{children:`"Hey Lumen, what's the vybe?" - Capture current time`}),e.jsx("li",{children:'"Hey Lumen, read [number]" - Get reading for specific number'}),e.jsx("li",{children:'"Hey Lumen, show history" - View reading history'})]})]})]}),W&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsx("div",{className:"bg-lf-ink/95 border border-lf-aurora/50 rounded-xl p-8 max-w-md shadow-glow-lg",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"rounded-full bg-lf-gradient p-6",children:e.jsx(B,{className:"h-12 w-12 text-white"})}),e.jsx("span",{className:"absolute inset-0 rounded-full bg-lf-aurora/20 animate-ping"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-2xl font-bold text-white mb-2",children:"Enable Voice Commands?"}),e.jsx("p",{className:"text-lf-slate text-sm",children:'Vyberology needs access to your microphone to use the "Hey Lumen" voice assistant.'})]}),e.jsxs("div",{className:"w-full space-y-3 text-xs text-lf-slate text-left",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-0.5",children:"âœ“"}),e.jsx("span",{children:"Voice commands processed locally on your device"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-0.5",children:"âœ“"}),e.jsx("span",{children:"Audio is never uploaded or recorded"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-0.5",children:"âœ“"}),e.jsx("span",{children:"You can disable this anytime"})]})]}),e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsxs(h,{onClick:I,className:"flex-1 bg-lf-gradient hover:shadow-glow",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Allow Microphone"]}),e.jsx(h,{onClick:()=>w(!1),variant:"outline",className:"flex-1 border-lf-violet text-lf-violet hover:bg-lf-violet/10",children:"Not Now"})]}),e.jsxs("p",{className:"text-xs text-lf-slate",children:[e.jsx("strong",{children:"Desktop:"}),' Browser will show a popup. Click "Allow".',e.jsx("br",{}),e.jsx("strong",{children:"Mobile:"})," Look for permission request at the ",e.jsx("strong",{children:"bottom"}),' of your screen. Tap "Allow".']}),e.jsx("div",{className:"w-full pt-4 border-t border-lf-violet/20",children:e.jsxs("details",{className:"text-xs text-lf-slate",children:[e.jsx("summary",{className:"cursor-pointer hover:text-white",children:"âš ï¸ Not seeing the permission prompt?"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"Chrome:"})}),e.jsxs("ol",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"1. Look for ðŸ”’ icon in address bar (left side)"}),e.jsx("li",{children:"2. Click it â†’ Site settings"}),e.jsx("li",{children:'3. Find "Microphone" â†’ Change to "Allow"'}),e.jsx("li",{children:"4. Refresh this page"})]}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Safari:"})}),e.jsxs("ol",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"1. Safari menu â†’ Settings for This Website"}),e.jsx("li",{children:'2. Find "Microphone" â†’ Change to "Allow"'}),e.jsx("li",{children:"3. Refresh this page"})]})]})]})})]})})})]})},Ue=()=>{const k=le(),[D,M]=l.useState(new Date),[n,C]=l.useState(null),[z,S]=l.useState(null),[u,d]=l.useState(!1),[P,f]=l.useState([]),[H,p]=l.useState(""),[W,w]=l.useState("time"),[m,x]=l.useState(""),[I,L]=l.useState([]),[T,V]=l.useState(""),[q,g]=l.useState("prompt"),[r,c]=l.useState("prompt"),[A,b]=l.useState(null),{toast:i}=te();l.useEffect(()=>{const t=setInterval(()=>{M(new Date)},1e3);return()=>clearInterval(t)},[]),l.useEffect(()=>{(async()=>{const s=await fe();g(s.status);const a=await xe();c(a.status)})()},[]);const v=async()=>{d(!0);const t=new Date,s=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});p(t.toLocaleString());try{Q("Time capture started",{time:s});const{data:a,error:o}=await E.functions.invoke("vybe-reading",{body:{inputs:[{label:"Time",value:s}],depth:"standard"}});if(o)throw U(o,{context:"Time Capture - Vybe Reading",level:"error",tags:{service:"vybe-reading",function:"time-capture"},extra:{time:s}}),o;a!=null&&a.reading&&(f([{input_text:s,normalized_number:"",numerology_data:{headline:"Vyberology Reading",keywords:[],guidance:a.reading},chakra_data:{name:"",element:"",focus:"",color:"#6B46C1"}}]),F({inputType:"time",inputValue:s,reading:a.reading}),i({title:"Vybe captured! ðŸŒŸ",description:`Reading generated for ${s}`}))}catch(a){console.error("Error processing time:",a),U(a,{context:"Time Capture - Unexpected Error",level:"error",tags:{service:"time-capture"}}),i({title:"Processing failed",description:a instanceof Error?a.message:"Please try again",variant:"destructive"})}finally{d(!1)}},N=async()=>{if(q==="denied"){b("camera");return}try{const t=await ve();if(!t.success){t.error&&!t.error.includes("cancel")&&(i({title:"Camera Error",description:t.error,variant:"destructive"}),t.error.includes("denied")&&(g("denied"),b("camera")));return}if(t.data){const a=await(await fetch(t.data)).blob(),o=new File([a],"camera-capture.jpg",{type:"image/jpeg"});C(o),S(t.data),f([]),w("image"),g("granted"),i({title:"Photo captured!",description:"Ready to read frequency numbers"})}}catch(t){console.error("Camera capture error:",t),i({title:"Camera failed",description:"Unable to capture photo",variant:"destructive"})}},K=async()=>{try{const t=await je();if(!t.success){t.error&&!t.error.includes("cancel")&&i({title:"Error",description:t.error,variant:"destructive"});return}if(t.data){const a=await(await fetch(t.data)).blob(),o=new File([a],"selected-image.jpg",{type:"image/jpeg"});C(o),S(t.data),f([]),w("image"),i({title:"Image selected!",description:"Ready to read frequency numbers"})}}catch(t){console.error("Photo picker error:",t),i({title:"Selection failed",description:"Unable to pick image",variant:"destructive"})}},ae=async()=>{if(!n){i({title:"No image",description:"Please select an image first",variant:"destructive"});return}d(!0),p(new Date().toLocaleString());try{Q("OCR processing started",{hasImage:!!n,imageSize:n.size});const t=new FormData;t.append("screenshot",n);const{data:s,error:a}=await E.functions.invoke("ocr",{body:t});if(a){console.error("========== OCR Process Failed =========="),console.error("OCR error:",a),console.error("OCR error message:",a.message),console.error("OCR response data:",s),console.error("Full error object:",JSON.stringify(a,null,2)),console.error("Full data object:",JSON.stringify(s,null,2)),console.error("======================================="),alert("Error Message: "+(a.message||"No message")),s?(alert("Data exists: "+typeof s),alert("Data.message: "+(s.message||"none")),alert("Data.error: "+(s.error||"none")),alert("Data.details: "+(s.details||"none")),alert("Data.status: "+(s.status||"none"))):alert("Data is null/undefined"),alert("Error name: "+a.name),alert("Error stack first 200 chars: "+(a.stack?a.stack.substring(0,200):"no stack")),U(a,{context:"OCR Processing - Edge Function",level:"error",tags:{service:"supabase-edge-function",function:"ocr"},extra:{hasImage:!!n,imageSize:n.size,imageType:n.type,errorMessage:a.message,errorName:a.name,responseData:s,dataType:typeof s,dataKeys:s?Object.keys(s):[]}});let o="OCR processing failed";throw s&&s.message?o=s.message:s&&s.details?o=s.details.substring(0,200):s&&s.error&&(o=s.error),new Error(o)}console.log("OCR response data:",s),s.readings&&s.readings.length>0?(f(s.readings),s.readings.forEach(o=>{F({inputType:"image",inputValue:o.input_text,reading:o.numerology_data.guidance})}),i({title:"Vybe captured! ðŸŒŸ",description:`Found ${s.readings.length} frequency signal(s)`})):i({title:"No numbers detected",description:"Try an image with visible numbers, times, or patterns",variant:"destructive"})}catch(t){console.error("Error processing image:",t),U(t,{context:"OCR Processing - Unexpected Error",level:"error",tags:{service:"ocr-processing"},extra:{hasImage:!!n,imageSize:n==null?void 0:n.size,imageType:n==null?void 0:n.type}});let s="Please try again";t instanceof Error&&(t.message.includes("timeout")?s="Image processing is taking too long. The OCR service may not be deployed.":t.message.includes("not found")?s="OCR service not found. It may not be deployed to Supabase.":s=t.message),i({title:"Processing failed",description:s,variant:"destructive"})}finally{d(!1)}},re=async()=>{const t=await pe();g(t.status),b(null),t.status==="granted"&&i({title:"Permission granted",description:"You can now use camera features"})},ie=async()=>{const t=await be();c(t.status),b(null),t.status==="granted"&&i({title:"Permission granted",description:"You can now use voice features"})},$=async()=>{if(!T.trim())return;const t=T.trim();V(""),L(s=>[...s,{role:"user",content:t}]),d(!0);try{const{data:s,error:a}=await E.functions.invoke("vybe-reading",{body:{inputs:[{label:"Question",value:t}],depth:"standard"}});if(a)throw a;s!=null&&s.reading&&L(o=>[...o,{role:"assistant",content:s.reading}])}catch(s){console.error("Error:",s),i({title:"Chat failed",description:s instanceof Error?s.message:"Please try again",variant:"destructive"})}finally{d(!1)}},ne=async t=>{const s=t.toLowerCase();if(s.includes("what")&&s.includes("vybe")){await v();return}if(s.includes("history")){k("/history");return}const a=s.match(/read\s+(\d+)/);if(a){const o=a[1];x(o),d(!0),p(new Date().toLocaleString());try{const{data:j,error:J}=await E.functions.invoke("vybe-reading",{body:{inputs:[{label:"Numbers",value:o}],depth:"standard"}});if(J)throw J;j!=null&&j.reading&&(f([{input_text:o,normalized_number:"",numerology_data:{headline:"Vyberology Reading",keywords:[],guidance:j.reading},chakra_data:{name:"",element:"",focus:"",color:"#6B46C1"}}]),F({inputType:"manual",inputValue:o,reading:j.reading}),i({title:"Reading generated! ðŸŒŸ",description:`Your reading for ${o} is ready`}))}catch(j){console.error("Error:",j),i({title:"Processing failed",description:j instanceof Error?j.message:"Please try again",variant:"destructive"})}finally{d(!1)}return}V(t),await $()};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-lf-midnight via-lf-ink to-lf-midnight",children:[e.jsx(oe,{}),A==="camera"&&e.jsx(X,{permissionType:"camera",status:q,onRequest:re,onDismiss:()=>b(null),variant:"modal"}),A==="microphone"&&e.jsx(X,{permissionType:"microphone",status:r,onRequest:ie,onDismiss:()=>b(null),variant:"modal"}),e.jsx("div",{className:"container mx-auto px-6 py-12",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-lf-violet/5 rounded-full blur-3xl animate-pulse",style:{animationDuration:"4s"}}),e.jsx("div",{className:"absolute top-40 right-20 w-40 h-40 bg-lf-aurora/5 rounded-full blur-3xl animate-pulse",style:{animationDuration:"5s"}}),e.jsx("div",{className:"absolute bottom-20 left-1/4 w-36 h-36 bg-lf-indigo/5 rounded-full blur-3xl animate-pulse",style:{animationDuration:"6s"}})]}),e.jsxs("div",{className:"mb-8 relative z-10",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs(h,{onClick:()=>k(-1),variant:"ghost",className:"gap-2 text-white hover:text-lf-aurora",children:[e.jsx(ce,{className:"h-5 w-5"}),"Back"]}),e.jsxs(h,{onClick:()=>k("/"),variant:"ghost",className:"gap-2 text-white hover:text-lf-aurora",children:[e.jsx(de,{className:"h-5 w-5"}),"Home"]})]}),e.jsxs("div",{className:"mb-4 flex items-center justify-center gap-3",children:[e.jsx("img",{src:Y,alt:"Vybe Logo",className:"h-12"}),e.jsx("h1",{className:"font-display text-5xl font-bold text-white",children:"Advanced Options"})]}),e.jsx("p",{className:"text-lg text-lf-slate text-center",children:"Upload images, enter numbers manually, chat with Lumen, or explore frequency patterns"})]}),e.jsxs(y,{className:"mb-8 border-lf-aurora/30 bg-lf-gradient p-8 text-center shadow-glow",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-center gap-3",children:[e.jsx(Z,{className:"h-8 w-8 text-white"}),e.jsx("span",{className:"font-display text-6xl font-bold text-white",children:D.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),e.jsx("p",{className:"mb-6 text-white/80",children:D.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx(h,{onClick:v,disabled:u,className:"relative inline-flex h-auto min-w-[220px] flex-col items-center gap-3 rounded-full bg-white px-6 py-5 font-semibold text-lf-indigo shadow-lg transition-all duration-200 hover:shadow-xl hover:scale-105 focus:outline-none focus:ring-2 focus:ring-lf-aurora disabled:cursor-not-allowed disabled:opacity-60 w-full sm:w-auto animate-pulse",style:{animationDuration:"3s"},children:u?e.jsx("span",{className:"text-lg",children:"Capturing..."}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:"What's the"}),e.jsxs("span",{className:"relative grid place-items-center rounded-full bg-white p-3 shadow-lg ring-2 ring-lf-violet/30",children:[e.jsx("span",{className:"absolute inset-0 rounded-full bg-lf-violet/20 animate-ping",style:{animationDuration:"2s"}}),e.jsx("span",{className:"absolute inset-0 rounded-full bg-lf-aurora/20 animate-pulse",style:{animationDuration:"3s"}}),e.jsx("img",{src:Y,alt:"Vybe",className:"h-12 w-12 relative z-10"})]})]})})]}),e.jsxs(ye,{defaultValue:"image",className:"mb-8",children:[e.jsxs(we,{className:"grid w-full grid-cols-4 bg-lf-ink/60",children:[e.jsx(_,{value:"image",children:"Upload Image"}),e.jsx(_,{value:"manual",children:"Manual Entry"}),e.jsx(_,{value:"voice",children:"Voice"}),e.jsx(_,{value:"chat",children:"Chat"})]}),e.jsx(O,{value:"image",children:e.jsx(y,{className:"border-white/10 bg-lf-ink/60 p-8 backdrop-blur",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("h3",{className:"font-display text-xl font-semibold text-white",children:"Capture or Upload Image"}),e.jsx("p",{className:"text-sm text-lf-slate",children:"Take a photo or upload screenshots with times, repeating numbers, or frequency patterns"})]}),e.jsx("div",{className:"flex flex-col items-center justify-center gap-4",children:z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-full",children:e.jsx("img",{src:z,alt:"Preview",className:"w-full rounded-lg border border-lf-violet/30"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(h,{onClick:K,variant:"outline",className:"gap-2 border-lf-violet text-lf-violet",children:[e.jsx(ke,{className:"h-4 w-4"}),"Change Image"]}),e.jsxs(h,{onClick:ae,disabled:u,className:"gap-2 bg-lf-gradient hover:shadow-glow",children:[e.jsx(R,{className:"h-4 w-4"}),u?"Reading Frequencies...":"Read Image"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex h-48 w-full items-center justify-center rounded-lg border-2 border-dashed border-lf-violet/50 bg-lf-midnight/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:"mx-auto mb-3 h-12 w-12 text-lf-violet"}),e.jsx("p",{className:"mb-1 text-sm font-semibold text-white",children:"Take a photo or choose an image"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(h,{onClick:N,className:"gap-2 bg-lf-gradient hover:shadow-glow",children:[e.jsx(ue,{className:"h-5 w-5"}),"Take Photo"]}),e.jsxs(h,{onClick:K,variant:"outline",className:"gap-2 border-lf-violet text-lf-violet hover:bg-lf-violet/10",children:[e.jsx(G,{className:"h-5 w-5"}),"Choose Image"]})]})]})})]})})}),e.jsx(O,{value:"manual",children:e.jsx(y,{className:"border-white/10 bg-lf-ink/60 p-8 backdrop-blur",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("h3",{className:"font-display text-xl font-semibold text-white",children:"Enter Numbers Manually"}),e.jsx("p",{className:"text-sm text-lf-slate",children:"Enter any numbers, times, or patterns you want to explore"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(he,{placeholder:"Enter numbers (e.g., 11:11, 222, 5/5/2025)...",value:m,onChange:t=>x(t.target.value),className:"min-h-32 border-lf-violet/30 bg-lf-midnight/50 text-white placeholder:text-lf-slate"}),e.jsxs(h,{onClick:async()=>{if(!m.trim()){i({title:"No input",description:"Please enter some numbers",variant:"destructive"});return}d(!0),p(new Date().toLocaleString());try{const{data:s,error:a}=await E.functions.invoke("vybe-reading",{body:{inputs:[{label:"Numbers",value:m}],depth:"standard"}});if(a)throw a;s!=null&&s.reading&&(f([{input_text:m,normalized_number:"",numerology_data:{headline:"Vyberology Reading",keywords:[],guidance:s.reading},chakra_data:{name:"",element:"",focus:"",color:"#6B46C1"}}]),F({inputType:"manual",inputValue:m,reading:s.reading}),i({title:"Reading generated! ðŸŒŸ",description:`Your reading for ${m} is ready`}))}catch(s){console.error("Error:",s),i({title:"Processing failed",description:s instanceof Error?s.message:"Please try again",variant:"destructive"})}finally{d(!1)}},disabled:u,className:"w-full gap-2 bg-lf-gradient hover:shadow-glow",children:[e.jsx(ee,{className:"h-4 w-4"}),u?"Generating...":"Generate Reading"]})]})]})})}),e.jsx(O,{value:"voice",children:e.jsx(Ce,{onCommand:ne,isActive:!0,disabled:u})}),e.jsx(O,{value:"chat",children:e.jsx(y,{className:"border-white/10 bg-lf-ink/60 backdrop-blur",children:e.jsxs("div",{className:"flex h-[500px] flex-col",children:[e.jsxs("div",{className:"border-b border-white/10 p-4",children:[e.jsx("h3",{className:"font-display text-xl font-semibold text-white",children:"Chat with Lumen"}),e.jsx("p",{className:"text-sm text-lf-slate",children:"Ask questions about your vyberology readings"})]}),e.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto p-4",children:I.length===0?e.jsx("div",{className:"flex h-full items-center justify-center text-center",children:e.jsxs("div",{children:[e.jsx(R,{className:"mx-auto mb-3 h-12 w-12 text-lf-violet"}),e.jsx("p",{className:"text-lf-slate",children:"Start a conversation about your readings"})]})}):I.map((t,s)=>e.jsx("div",{className:`rounded-lg p-4 ${t.role==="user"?"ml-8 bg-lf-violet/20 text-white":"mr-8 bg-lf-midnight/50 text-white"}`,children:e.jsx("p",{className:"whitespace-pre-wrap",children:t.content})},s))}),e.jsx("div",{className:"border-t border-white/10 p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{placeholder:"Ask a question...",value:T,onChange:t=>V(t.target.value),onKeyDown:t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),$())},className:"border-lf-violet/30 bg-lf-midnight/50 text-white placeholder:text-lf-slate",disabled:u}),e.jsx(h,{onClick:$,disabled:u||!T.trim(),className:"gap-2 bg-lf-gradient hover:shadow-glow",children:e.jsx(ge,{className:"h-4 w-4"})})]})})]})})})]}),e.jsxs(y,{className:"mb-6 border-lf-aurora/30 bg-lf-gradient/50 p-6 backdrop-blur shadow-glow relative z-10",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-lf-aurora"}),e.jsx("h3",{className:"font-display text-xl font-semibold text-white",children:"Universe Signals"})]}),e.jsx("p",{className:"text-sm text-white/80 mb-4",children:"Quick capture common frequency patterns - strong guidance from the universe"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:["11:11","222","333","444","555","777","888","1111"].map(t=>e.jsx(h,{onClick:async()=>{d(!0),p(new Date().toLocaleString());try{const{data:s,error:a}=await E.functions.invoke("vybe-reading",{body:{inputs:[{label:"Frequency Pattern",value:t}],depth:"standard"}});if(a)throw a;s!=null&&s.reading&&(f([{input_text:t,normalized_number:"",numerology_data:{headline:`Universe Signal: ${t}`,keywords:[],guidance:s.reading},chakra_data:{name:"",element:"",focus:"",color:"#A78BFA"}}]),F({inputType:"pattern",inputValue:t,reading:s.reading}),i({title:"Signal captured! âœ¨",description:`Reading for ${t}`}))}catch(s){console.error("Error:",s),i({title:"Processing failed",description:s instanceof Error?s.message:"Please try again",variant:"destructive"})}finally{d(!1)}},disabled:u,className:"bg-white/90 hover:bg-white text-lf-indigo font-bold text-lg h-14 rounded-lg shadow-md hover:shadow-lg transition-all hover:scale-105",children:t},t))})]}),e.jsxs(y,{className:"mb-6 border-lf-violet/30 bg-lf-midnight/50 p-6 backdrop-blur relative z-10",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-lf-violet"}),e.jsx("h3",{className:"font-display text-xl font-semibold text-white",children:"Frequency Guidance"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx("div",{className:"rounded-lg bg-lf-ink/40 p-4 border border-lf-aurora/20 hover:border-lf-aurora/50 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full bg-lf-aurora/20 p-2",children:e.jsx(Z,{className:"h-5 w-5 text-lf-aurora"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"Timing Patterns"}),e.jsx("p",{className:"text-sm text-lf-slate",children:"Repeating numbers in time (11:11, 22:22) are powerful synchronicity markers"})]})]})}),e.jsx("div",{className:"rounded-lg bg-lf-ink/40 p-4 border border-lf-violet/20 hover:border-lf-violet/50 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full bg-lf-violet/20 p-2",children:e.jsx(ee,{className:"h-5 w-5 text-lf-violet"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"Angel Numbers"}),e.jsx("p",{className:"text-sm text-lf-slate",children:"Sequences like 333, 444, 555 carry specific messages from the universe"})]})]})}),e.jsx("div",{className:"rounded-lg bg-lf-ink/40 p-4 border border-lf-indigo/20 hover:border-lf-indigo/50 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full bg-lf-indigo/20 p-2",children:e.jsx(R,{className:"h-5 w-5 text-lf-indigo"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"Master Numbers"}),e.jsx("p",{className:"text-sm text-lf-slate",children:"11, 22, 33 are master numbers with amplified spiritual significance"})]})]})}),e.jsx("div",{className:"rounded-lg bg-lf-ink/40 p-4 border border-lf-aurora/20 hover:border-lf-aurora/50 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-full bg-lf-aurora/20 p-2",children:e.jsx(G,{className:"h-5 w-5 text-lf-aurora"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"Daily Captures"}),e.jsx("p",{className:"text-sm text-lf-slate",children:"Screenshot numbers you encounter - license plates, receipts, timestamps"})]})]})})]})]}),P.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-lf-slate",children:["Captured at ",H]})}),P.map((t,s)=>e.jsx(y,{className:"border-lf-violet/30 bg-lf-ink/60 p-8 backdrop-blur transition-all hover:border-lf-violet hover:shadow-glow",children:e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("div",{className:"whitespace-pre-wrap text-white",style:{fontFamily:"system-ui, -apple-system, sans-serif"},children:t.numerology_data.guidance})})},s))]})]})})]})};export{Ue as default};
