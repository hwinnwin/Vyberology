import{j as e}from"./ui-vendor-BdNHRkPp.js";import{r as o,u as j}from"./react-vendor-BrWXyIWg.js";import{C as N,B as g,L as y,b as w,d as R,e as C,f as E,A as k,H as S,g as M,t as u,h as b}from"./index-BU0JQuHZ.js";import{I as v}from"./input-BUOmuTmR.js";import{L as p,R as F,E as D}from"./error-message-Bjh22J7Y.js";import{s as P}from"./alert-DNlM_nKM.js";import{s as L}from"./readingHistory-CkV6lPJ-.js";import"./supabase-vendor-k7UXo7He.js";import"./query-vendor-aFyS-rxT.js";import"./copy-CjauooGe.js";function Y({onGenerate:m,isLoading:t}){const[s,d]=o.useState(""),[a,x]=o.useState(""),[r,h]=o.useState({}),f=l=>{l.preventDefault();const i={};if((!s.trim()||s.trim().length<2)&&(i.fullName="Please enter a real name"),(!a||!/^\d{4}-\d{2}-\d{2}$/.test(a))&&(i.dob="Please enter a valid date (YYYY-MM-DD)"),Object.keys(i).length>0){h(i);return}h({}),m(s,a)};return e.jsxs(N,{className:"border-white/10 bg-lf-ink/60 p-6 backdrop-blur",children:[e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"fullName",className:"text-white",children:"Full Name"}),e.jsx(v,{id:"fullName",type:"text",placeholder:"Enter your full name",value:s,onChange:l=>d(l.target.value),className:`border-lf-violet/30 bg-lf-midnight/50 text-white placeholder:text-lf-slate ${r.fullName?"border-red-500":""}`}),r.fullName&&e.jsx("p",{className:"text-sm text-red-400",children:r.fullName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"dob",className:"text-white",children:"Date of Birth"}),e.jsx(v,{id:"dob",type:"date",value:a,onChange:l=>x(l.target.value),className:`border-lf-violet/30 bg-lf-midnight/50 text-white ${r.dob?"border-red-500":""}`}),r.dob&&e.jsx("p",{className:"text-sm text-red-400",children:r.dob})]}),e.jsxs(g,{type:"submit",className:"w-full bg-lf-gradient hover:shadow-glow",disabled:t,children:[t&&e.jsx(y,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Generating Your Reading...":"Generate Reading"]})]}),!s&&!a&&e.jsx("p",{className:"text-sm text-lf-slate text-center mt-4",children:"Drop your full name + date of birth. I'll map your numbers & your dominant chakra."})]})}const $=o.memo(function({result:t}){return e.jsxs(N,{className:"border-lf-violet/30 bg-lf-ink/60 overflow-hidden backdrop-blur transition-all hover:border-lf-violet hover:shadow-glow",children:[e.jsxs(w,{children:[e.jsx(R,{className:"text-white font-display text-3xl",children:"Your Numerology Reading"}),e.jsxs(C,{className:"text-lf-slate text-lg",children:[t.input.fullName," Â· ",t.input.dob]})]}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-lf-midnight/50 border border-lf-violet/20 transition-all hover:border-lf-violet/50",children:[e.jsx("div",{className:"text-3xl font-bold text-lf-aurora",children:t.numbers.lifePath.value}),e.jsx("div",{className:"text-xs text-lf-slate mt-1",children:"Life Path"}),t.numbers.lifePath.isMaster&&e.jsx("div",{className:"text-xs font-semibold text-lf-violet mt-1",children:"Master"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-lf-midnight/50 border border-lf-violet/20 transition-all hover:border-lf-violet/50",children:[e.jsx("div",{className:"text-3xl font-bold text-lf-aurora",children:t.numbers.expression.value}),e.jsx("div",{className:"text-xs text-lf-slate mt-1",children:"Expression"}),t.numbers.expression.isMaster&&e.jsx("div",{className:"text-xs font-semibold text-lf-violet mt-1",children:"Master"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-lf-midnight/50 border border-lf-violet/20 transition-all hover:border-lf-violet/50",children:[e.jsx("div",{className:"text-3xl font-bold text-lf-aurora",children:t.numbers.soulUrge.value}),e.jsx("div",{className:"text-xs text-lf-slate mt-1",children:"Soul Urge"}),t.numbers.soulUrge.isMaster&&e.jsx("div",{className:"text-xs font-semibold text-lf-violet mt-1",children:"Master"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-lf-midnight/50 border border-lf-violet/20 transition-all hover:border-lf-violet/50",children:[e.jsx("div",{className:"text-3xl font-bold text-lf-aurora",children:t.numbers.personality.value}),e.jsx("div",{className:"text-xs text-lf-slate mt-1",children:"Personality"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-lf-midnight/50 border border-lf-violet/20 transition-all hover:border-lf-violet/50",children:[e.jsx("div",{className:"text-3xl font-bold text-lf-aurora",children:t.numbers.maturity.value}),e.jsx("div",{className:"text-xs text-lf-slate mt-1",children:"Maturity"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-lf-aurora",children:"Frequency Profile"}),e.jsx("p",{className:"text-sm leading-relaxed text-white",children:t.reading.frequencyProfile})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-lf-aurora",children:"Energy Field"}),e.jsx("p",{className:"text-sm leading-relaxed text-white",children:t.reading.energyField})]}),e.jsxs("div",{className:"space-y-2 p-4 rounded-lg bg-lf-violet/20 border border-lf-violet",children:[e.jsx("h3",{className:"text-sm font-semibold text-lf-aurora",children:"Insight"}),e.jsx("p",{className:"text-sm leading-relaxed text-white",children:t.reading.insight})]}),e.jsxs("div",{className:"space-y-2 p-6 rounded-lg bg-lf-midnight/50 border border-lf-violet/30",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-lf-aurora font-display",children:"Complete Reading"}),e.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-relaxed font-sans text-white",children:t.reading.detailedSummary})]}),e.jsx(F,{readingText:t.reading.detailedSummary,title:`Vyberology Reading - ${t.input.fullName}`})]})]})});function V(){const m=j(),[t,s]=o.useState(null),[d,a]=o.useState(!1),[x,r]=o.useState(null),h=async(l,i)=>{a(!0),r(null),s(null);try{const{data:n,error:c}=await P.functions.invoke("read",{body:{fullName:l,dob:i}});if(c)throw new Error(c.message||"Failed to generate reading");if(!n)throw new Error("No data received from server");s(n),u("reading_generated",{platform:"web",source:"numerology-reader"}),L({inputType:"manual",inputValue:`${l} (${i})`,reading:JSON.stringify(n)}),b({title:"Success!",description:"Your reading has been generated."})}catch(n){console.error("Error generating reading:",n);const c=n instanceof Error?n.message:"An unexpected error occurred";r(c),u("error_occurred",{platform:"web",scope:"numerology_reader",message:c}),b({title:"Error",description:c,variant:"destructive"})}finally{a(!1)}},f=()=>{r(null)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lf-midnight via-lf-ink to-lf-midnight",children:e.jsxs("div",{className:"container max-w-4xl py-12 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs(g,{onClick:()=>m(-1),variant:"ghost",className:"gap-2 text-white hover:text-lf-aurora",children:[e.jsx(k,{className:"h-5 w-5"}),"Back"]}),e.jsxs(g,{onClick:()=>m("/"),variant:"ghost",className:"gap-2 text-white hover:text-lf-aurora",children:[e.jsx(S,{className:"h-5 w-5"}),"Home"]})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Numerology Reader"}),e.jsx("p",{className:"text-lf-slate",children:"Discover your numbers and dominant chakras"})]}),e.jsx(Y,{onGenerate:h,isLoading:d}),d&&e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(M,{size:"lg",text:"Calculating your numerology... This may take a moment."})}),x&&!d&&e.jsx(D,{title:"Failed to Generate Reading",message:x,onRetry:f}),t&&!d&&!x&&e.jsx($,{result:t})]})})}export{V as default};
