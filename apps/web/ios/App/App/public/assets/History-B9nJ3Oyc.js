import{j as e}from"./ui-vendor-BdNHRkPp.js";import{u as S,r}from"./react-vendor-BrWXyIWg.js";import{c as T,u as D,B as i,A as $,H as A,C as n}from"./index-BU0JQuHZ.js";import{g as I,a as M,c as L,d as P}from"./readingHistory-CkV6lPJ-.js";import{C as v}from"./calendar-eQcRf1KU.js";import{T as N}from"./trash-2-DIln1oix.js";import{S as b,I as U}from"./sparkles-CGywxmzJ.js";import{H as w,C as B}from"./hash-BlhyCpOE.js";import"./supabase-vendor-k7UXo7He.js";import"./query-vendor-aFyS-rxT.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=T("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),W=()=>{const g=S(),{toast:f}=D(),[l,y]=r.useState([]),[u,k]=r.useState([]),[t,o]=r.useState(null);r.useEffect(()=>{c()},[]);const c=()=>{const s=I();y(s);const a=M();k(a.slice(0,8))},C=s=>{P(s),c(),o(null),f({title:"Reading deleted",description:"The reading has been removed from your history"})},H=()=>{window.confirm("Are you sure you want to clear all reading history? This cannot be undone.")&&(L(),c(),o(null),f({title:"History cleared",description:"All readings have been removed"}))},p=s=>{switch(s){case"time":return e.jsx(B,{className:"h-4 w-4"});case"pattern":return e.jsx(b,{className:"h-4 w-4"});case"manual":return e.jsx(w,{className:"h-4 w-4"});case"image":return e.jsx(U,{className:"h-4 w-4"});default:return e.jsx(w,{className:"h-4 w-4"})}},R=s=>{const a=new Date(s),j=new Date,d=j.getTime()-a.getTime(),m=Math.floor(d/6e4),x=Math.floor(d/36e5),h=Math.floor(d/864e5);return m<60?`${m} minute${m!==1?"s":""} ago`:x<24?`${x} hour${x!==1?"s":""} ago`:h<7?`${h} day${h!==1?"s":""} ago`:a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:a.getFullYear()!==j.getFullYear()?"numeric":void 0})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lf-midnight via-lf-ink to-lf-midnight",children:e.jsxs("div",{className:"container mx-auto px-6 py-12",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs(i,{onClick:()=>g(-1),variant:"ghost",className:"gap-2 text-white hover:text-lf-aurora",children:[e.jsx($,{className:"h-5 w-5"}),"Back"]}),e.jsxs(i,{onClick:()=>g("/"),variant:"ghost",className:"gap-2 text-white hover:text-lf-aurora",children:[e.jsx(A,{className:"h-5 w-5"}),"Home"]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(v,{className:"h-8 w-8 text-lf-aurora"}),e.jsx("h1",{className:"font-display text-5xl font-bold text-white",children:"Reading History"})]}),e.jsx("p",{className:"text-lf-slate text-lg",children:"Your personal frequency log - track patterns and revisit past readings"})]}),u.length>0&&e.jsxs(n,{className:"mb-8 border-lf-aurora/30 bg-lf-gradient/50 p-6 backdrop-blur shadow-glow",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-lf-aurora"}),e.jsx("h3",{className:"font-display text-xl font-semibold text-white",children:"Recurring Patterns"})]}),e.jsx("p",{className:"text-sm text-white/80 mb-4",children:"Numbers appearing most frequently in your readings - strong messages from the universe"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:u.map(({pattern:s,count:a})=>e.jsxs("div",{className:"bg-white/90 rounded-lg p-4 text-center hover:bg-white transition-all hover:scale-105",children:[e.jsx("div",{className:"text-2xl font-bold text-lf-indigo",children:s}),e.jsxs("div",{className:"text-xs text-lf-slate mt-1",children:[a," time",a!==1?"s":""]})]},s))})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(n,{className:"border-lf-violet/30 bg-lf-ink/60 p-6 backdrop-blur",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-display text-xl font-semibold text-white",children:["All Readings (",l.length,")"]}),l.length>0&&e.jsx(i,{onClick:H,variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300 hover:bg-red-400/10",children:e.jsx(N,{className:"h-4 w-4"})})]}),l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"h-12 w-12 text-lf-violet mx-auto mb-3"}),e.jsx("p",{className:"text-lf-slate",children:"No readings yet"}),e.jsx("p",{className:"text-sm text-lf-slate/70 mt-1",children:"Capture your first vybe to start your log"})]}):e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:l.map(s=>e.jsxs("button",{onClick:()=>o(s),className:`w-full text-left p-4 rounded-lg border transition-all ${(t==null?void 0:t.id)===s.id?"border-lf-violet bg-lf-violet/20":"border-lf-violet/20 bg-lf-midnight/50 hover:border-lf-violet/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p(s.inputType),e.jsx("span",{className:"font-semibold text-white text-sm",children:s.inputValue})]}),e.jsx("div",{className:"text-xs text-lf-slate",children:R(s.timestamp)})]},s.id))})]})}),e.jsx("div",{className:"lg:col-span-2",children:t?e.jsxs(n,{className:"border-lf-violet/30 bg-lf-ink/60 p-8 backdrop-blur",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p(t.inputType),e.jsx("h2",{className:"font-display text-2xl font-bold text-white",children:t.inputValue})]}),e.jsx("p",{className:"text-sm text-lf-slate",children:new Date(t.timestamp).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx(i,{onClick:()=>C(t.id),variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300 hover:bg-red-400/10",children:e.jsx(N,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("div",{className:"whitespace-pre-wrap text-white leading-relaxed",children:t.reading})})]}):e.jsx(n,{className:"border-lf-violet/30 bg-lf-ink/60 p-12 backdrop-blur",children:e.jsxs("div",{className:"text-center",children:[e.jsx(b,{className:"h-16 w-16 text-lf-violet mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lf-slate text-lg",children:"Select a reading to view details"})]})})})]})]})})};export{W as default};
