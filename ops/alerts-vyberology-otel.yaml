groups:
  - name: vybe.otel
    rules:
      - alert: VybeHighErrorRate
        expr: |
          sum(rate(http_server_duration_count{http_response_status_code=~"5.."}[5m]))
            / sum(rate(http_server_duration_count[5m])) > 0.01
        for: 10m
        labels:
          severity: page
        annotations:
          summary: "Vyberology error rate high (>1%)"

      - alert: VybeHighLatencyP95
        expr: |
          histogram_quantile(0.95,
            sum(rate(http_server_duration_bucket[5m])) by (le)
          ) > 0.25
        for: 10m
        labels:
          severity: page
        annotations:
          summary: "Vyberology p95 latency > 250ms"
